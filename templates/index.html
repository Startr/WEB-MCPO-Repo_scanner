<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://startr.style/style.css">
    <title>Git TODO Scanner</title>
    
</head>
<body style="--ff:Arial, sans-serif; --maxw:800px; --m:0 auto; --p:20px; --lh:1.6">
    <h1 style="--c:#333; --bb:1px solid #ddd; --pb:10px">Git TODO Scanner</h1>
    <div style="--mb:20px">
        <a href="https://github.com/Startr/WEB-MCPO-Repo_scanner" target="_blank" style="--d:flex; --ai:center; --td:none; --c:#333; --w:fit-content">
            <svg height="32" aria-hidden="true" viewBox="0 0 16 16" version="1.1" width="32" style="--mr:8px">
                <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
            </svg>
            <span>View on GitHub: Contribute to the project</span>
        </a>
    </div>
    
    {% if error %}
    <div class="error" style="--c:#ff0000; --bgc:#ffeeee; --p:10px; --radius:5px; --mb:20px">{{ error }}</div>
    {% endif %}
    
    <form method="POST" style="--bgc:#f9f9f9; --p:20px; --radius:5px; --b:1px solid #ddd">
        <h2>Enter Repository URL</h2>
        <input type="text" name="repo_url" placeholder="https://github.com/username/repository.git" required style="--w:100%; --p:10px; --mb:15px; --b:1px solid #ddd; --radius:4px; --bxs:border-box">
        <button type="submit" style="--bgc:#4CAF50; --c:white; --p:10px 15px; --b:none; --radius:4px; --cur:pointer">Scan Repository</button>
    </form>
    
    {% if local_repos %}
    <div style="--mt:30px; --bgc:#f9f9f9; --p:20px; --radius:5px; --b:1px solid #ddd">
        <h2>Local Repositories</h2>
        <p>Previously scanned repositories available locally:</p>
        <div style="--maxh:400px; --ofy:auto">
            <table style="--w:100%; border-collapse:collapse">
                <thead>
                    <tr>
                        <th style="--ta:left; --p:8px; --bb:2px solid #ddd">Repository</th>
                        <th style="--ta:left; --p:8px; --bb:2px solid #ddd">Last Updated</th>
                        <th style="--ta:center; --p:8px; --bb:2px solid #ddd">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for repo in local_repos %}
                    <tr>
                        <td style="--p:8px; --bb:1px solid #ddd">{{ repo.name }}</td>
                        <td style="--p:8px; --bb:1px solid #ddd">{{ repo.last_modified_str }}</td>
                        <td style="--p:8px; --bb:1px solid #ddd; --ta:center">
                            <a href="{{ url_for('scan_repo', repo_url=repo.name) }}" style="--bgc:#4CAF50; --c:white; --p:5px 10px; --radius:3px; --td:none; --d:inline-block">View TODOs</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% endif %}
</body>
</html>

